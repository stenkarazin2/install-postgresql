З а д а н и е :

Реализовать консольное приложение, которое будет устанавливать PostgreSQL на удаленный хост, настраивать и запускать.

Вводные: 2 сервера, один на Debian, второй на CentOS (AlmaLinux). На обоих серверах пользователю root подложен один и тот же открытый ssh ключ. У исполнителя есть закрытая часть ключа, с помощью которой он подключается.

Реализация должна включать:

    подключение к удаленным хостам по ssh
    оценку загруженности серверов, выбор наименее нагруженного из серверов как целевого
    инсталляцию PostgreSQL на целевой хост
    настройку PostgreSQL для приема внешних соединений, т.е. БД должна отвечать на sql-запросы с внешних ip-адресов
    настройку подключения пользователя “student” к PostgreSql только с ip адреса второго сервера.

Требования

    приложение принимает один строковый параметр - ip адреса или имена серверов одной строкой, разделитель - запятая
    приложение должно сообщать статус выполнения инсталляции

Будет плюсом

    приложение выполняет проверку работы БД, выполняя sql запрос (SELECT 1)

Требования к коду

    язык разработки: bash, python, ansible
    библиотеки можно использовать любые
    код должен быть выложен на Github с Readme файлом с инструкцией по запуску и примерами. Важно, чтобы по инструкции можно было запустить код и он работал
    при возникновении вопросов по ТЗ оставляем принятие решения за тобой.

Желательно отразить в Readme, какие вопросы возникали и какие решения были приняты



И н с т р у к ц и я :

1. Создать тестовый стенд, включающий два хоста:
1) хост №1 с ОС Debian, доступный по адресу IP1
2) хост №2 с ОС AlmaLinux, доступный по адресу IP2

2. Запустить скрипт в среде bash командой
python3 script.py IP1,IP2
Например,
python3 script.py 158.160.18.110,158.160.57.17

3. Аутентифицироваться на хосте №2 и попытаться подключиться к СУБД на целевом хосте, используя учетную запись student (для определения того, какой из хостов является целевым, см. вывод предыдущей команды)



К о м м е н т а р и и :
